{"remainingRequest":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ferp93/Otros/GIt/muvilWeb/src/views/OperatorContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ferp93/Otros/GIt/muvilWeb/src/views/OperatorContent.vue","mtime":1634748447299},{"path":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/cache-loader/dist/cjs.js","mtime":1634753517854},{"path":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/babel-loader/lib/index.js","mtime":1634753518287},{"path":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/cache-loader/dist/cjs.js","mtime":1634753517854},{"path":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/vue-loader/lib/index.js","mtime":1634753512359}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgZGlhbG9nOiBmYWxzZSwKICAgIGRpYWxvZ0RlbGV0ZTogZmFsc2UsCiAgICBoZWFkZXJzOiBbCiAgICAgIHsKICAgICAgICB0ZXh0OiAiTm9tYnJlIiwKICAgICAgICBhbGlnbjogInN0YXJ0IiwKICAgICAgICB2YWx1ZTogIm5hbWUiLAogICAgICB9LAogICAgICB7IHRleHQ6ICJDb3JyZW8gZWxlY3Ryw7NuaWNvIiwgdmFsdWU6ICJtYWlsIiB9LAogICAgICB7IHRleHQ6ICJGZWNoYSBkZSBjcmVhY2nDs24iLCB2YWx1ZTogImNyZWF0ZWREYXRlRm9ybWF0ZWQiIH0sCiAgICAgIHsgdGV4dDogIkVzdGFkbyIsIHZhbHVlOiAic3RhdHVzTmFtZSIgfSwKICAgICAgeyB0ZXh0OiAiQWNjaW9uZXMiLCB2YWx1ZTogImFjdGlvbnMiLCBzb3J0YWJsZTogZmFsc2UgfSwKICAgIF0sCiAgICBpdGVtczogW10sCiAgICBvcGNpb25lczogWyJBY3Rpdm8iLCAiSW5hY3Rpdm8iXSwKICAgIGVkaXRlZEluZGV4OiAtMSwKICAgIGVkaXRlZEl0ZW06IHsKICAgICAgbmFtZTogIiIsCiAgICAgIG1haWw6ICIiLAogICAgICBjcmVhdGVkRGF0ZTogIiIsCiAgICAgIHN0YXR1czogMSwKICAgICAgc3RhdHVzTmFtZTogIkFjdGl2byIsCiAgICAgIHBhc3N3b3JkOiAiMTIzNDU2ISIsCiAgICAgIGlkT3BlcmFkb3I6IDAsCiAgICAgIGNyZWF0ZWREYXRlRm9ybWF0ZWQ6ICIiLAogICAgfSwKICAgIGRlZmF1bHRJdGVtOiB7CiAgICAgIG5hbWU6ICIiLAogICAgICBtYWlsOiAiIiwKICAgICAgY3JlYXRlZERhdGU6ICIiLAogICAgICBzdGF0dXM6IDEsCiAgICAgIHN0YXR1c05hbWU6ICJBY3Rpdm8iLAogICAgICBwYXNzd29yZDogIjEyMzQ1NiEiLAogICAgICBpZE9wZXJhZG9yOiAwLAogICAgICBjcmVhdGVkRGF0ZUZvcm1hdGVkOiAiIiwKICAgIH0sCiAgfSksCgogIGNvbXB1dGVkOiB7CiAgICBmb3JtVGl0bGUoKSB7CiAgICAgIHJldHVybiB0aGlzLmVkaXRlZEluZGV4ID09PSAtMSA/ICJOdWV2byIgOiAiRWRpdGFyIjsKICAgIH0sCiAgfSwKCiAgd2F0Y2g6IHsKICAgIGRpYWxvZyh2YWwpIHsKICAgICAgdmFsIHx8IHRoaXMuY2xvc2UoKTsKICAgIH0sCiAgICBkaWFsb2dEZWxldGUodmFsKSB7CiAgICAgIHZhbCB8fCB0aGlzLmNsb3NlRGVsZXRlKCk7CiAgICB9LAogIH0sCgogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICB0cnkgewogICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoCiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYmFja0Jhc2VVUkwgKyAiL2FwaS9vcGVyYXRvciIKICAgICAgKTsKICAgICAgcmVzcG9uc2UuZGF0YS5tYXAoKGl0ZW0pID0+IHsKICAgICAgICBpZiAoaXRlbS5zdGF0dXMgPT0gMSkgaXRlbS5zdGF0dXNOYW1lID0gIkFjdGl2byI7CiAgICAgICAgZWxzZSBpdGVtLnN0YXR1c05hbWUgPSAiSW5hY3Rpdm8iOwogICAgICAgIGNvbnN0IGZlY2hhID0gbmV3IERhdGUoaXRlbS5jcmVhdGVkRGF0ZSk7CiAgICAgICAgaXRlbS5jcmVhdGVkRGF0ZUZvcm1hdGVkID0KICAgICAgICAgICIiICsgZmVjaGEudG9Mb2NhbGVEYXRlU3RyaW5nKCkgKyAiICIgKyBmZWNoYS50b0xvY2FsZVRpbWVTdHJpbmcoKTsKICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7CiAgICAgIH0pOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGVkaXRJdGVtKGl0ZW0pIHsKICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IHRoaXMuaXRlbXMuaW5kZXhPZihpdGVtKTsKICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7CiAgICAgIHRoaXMuZGlhbG9nID0gdHJ1ZTsKICAgIH0sCgogICAgZGVsZXRlSXRlbShpdGVtKSB7CiAgICAgIHRoaXMuZWRpdGVkSW5kZXggPSB0aGlzLml0ZW1zLmluZGV4T2YoaXRlbSk7CiAgICAgIHRoaXMuZWRpdGVkSXRlbSA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pOwogICAgICB0aGlzLmRpYWxvZ0RlbGV0ZSA9IHRydWU7CiAgICB9LAoKICAgIGFzeW5jIGRlbGV0ZUl0ZW1Db25maXJtKCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZSgKICAgICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmJhY2tCYXNlVVJMICsKICAgICAgICAgICAgIi9hcGkvb3BlcmF0b3IvIiArCiAgICAgICAgICAgIHRoaXMuZWRpdGVkSXRlbS5pZE9wZXJhdG9yCiAgICAgICAgKTsKICAgICAgICB0aGlzLml0ZW1zLnNwbGljZSh0aGlzLmVkaXRlZEluZGV4LCAxKTsKICAgICAgICB0aGlzLmNsb3NlRGVsZXRlKCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICAgIHRoaXMuaXRlbXMuc3BsaWNlKHRoaXMuZWRpdGVkSW5kZXgsIDEpOwogICAgICB0aGlzLmNsb3NlRGVsZXRlKCk7CiAgICB9LAoKICAgIGNsb3NlKCkgewogICAgICB0aGlzLmRpYWxvZyA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5lZGl0ZWRJdGVtID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0SXRlbSk7CiAgICAgICAgdGhpcy5lZGl0ZWRJbmRleCA9IC0xOwogICAgICB9KTsKICAgIH0sCgogICAgY2xvc2VEZWxldGUoKSB7CiAgICAgIHRoaXMuZGlhbG9nRGVsZXRlID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRJdGVtKTsKICAgICAgICB0aGlzLmVkaXRlZEluZGV4ID0gLTE7CiAgICAgIH0pOwogICAgfSwKCiAgICBhc3luYyBzYXZlKCkgewogICAgICBpZiAodGhpcy5lZGl0ZWRJdGVtLnN0YXR1c05hbWUgPT0gIkFjdGl2byIpIHRoaXMuZWRpdGVkSXRlbS5zdGF0dXMgPSAxOwogICAgICBlbHNlIHRoaXMuZWRpdGVkSXRlbS5zdGF0dXMgPSAwOwogICAgICBpZiAodGhpcy5lZGl0ZWRJbmRleCA+IC0xKSB7CiAgICAgICAgLy91cGRhdGUKICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuaXRlbXNbdGhpcy5lZGl0ZWRJbmRleF0sIHRoaXMuZWRpdGVkSXRlbSk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGF3YWl0IGF4aW9zLnB1dCgKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYmFja0Jhc2VVUkwgKwogICAgICAgICAgICAgICIvYXBpL29wZXJhdG9yLyIgKwogICAgICAgICAgICAgIHRoaXMuZWRpdGVkSXRlbS5pZE9wZXJhdG9yLAogICAgICAgICAgICB0aGlzLmVkaXRlZEl0ZW0KICAgICAgICAgICk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy9jcmVhdGUKCiAgICAgICAgY29uc3QgaG95ID0gbmV3IERhdGUoKTsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0uY3JlYXRlZERhdGUgPSBob3kudG9VVENTdHJpbmcoKTsKICAgICAgICB0aGlzLmVkaXRlZEl0ZW0uY3JlYXRlZERhdGVGb3JtYXRlZCA9CiAgICAgICAgICAiIiArIGhveS50b0xvY2FsZURhdGVTdHJpbmcoKSArICIgIiArIGhveS50b0xvY2FsZVRpbWVTdHJpbmcoKTsKICAgICAgICB0aGlzLml0ZW1zLnB1c2godGhpcy5lZGl0ZWRJdGVtKTsKICAgICAgICB0cnkgewogICAgICAgICAgYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUuYmFja0Jhc2VVUkwgKyAiL2FwaS9vcGVyYXRvciIsCiAgICAgICAgICAgIHRoaXMuZWRpdGVkSXRlbQogICAgICAgICAgKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmNsb3NlKCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["OperatorContent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OperatorContent.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <v-container>\n    <v-data-table\n      :headers=\"headers\"\n      :items=\"items\"\n      sort-by=\"name\"\n      class=\"elevation-1\"\n      :footer-props=\"{itemsPerPageText: 'Elementos por página', pageText: '{0} de {1}'}\"\n    >\n      <template v-slot:top>\n        <v-toolbar flat>\n          <v-toolbar-title>Operarios de movilidad escolar</v-toolbar-title>\n\n          <v-spacer></v-spacer>\n          <v-dialog v-model=\"dialog\" max-width=\"800px\">\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn\n                color=\"yellow darken-3\"\n                dark\n                class=\"mb-2\"\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n                Crear\n              </v-btn>\n            </template>\n            <v-card>\n              <v-card-title>\n                <span class=\"text-h5\">{{ formTitle }}</span>\n              </v-card-title>\n\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                      <v-text-field\n                        v-model=\"editedItem.name\"\n                        label=\"Nombre\"\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                      <v-text-field\n                        v-model=\"editedItem.phone\"\n                        label=\"Número\"\n                      ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                      <!--                       <v-text-field\n                        v-model=\"editedItem.status\"\n                        :items=\"opciones\"\n                        label=\"Estado\"\n                      ></v-text-field> -->\n                      <v-select\n                        v-model=\"editedItem.statusName\"\n                        :items=\"opciones\"\n                        label=\"Estado\"\n                        required\n                      ></v-select>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"6\" md=\"4\">\n                      <v-text-field\n                        v-model=\"editedItem.mail\"\n                        label=\"Correo\"\n                      ></v-text-field>\n                    </v-col>\n                  </v-row>\n                </v-container>\n              </v-card-text>\n\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"yellow darken-3\" dark @click=\"close\">\n                  Cancelar\n                </v-btn>\n                <v-btn color=\"yellow darken-3\" dark @click=\"save\">\n                  Grabar\n                </v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n          <v-dialog v-model=\"dialogDelete\" max-width=\"700px\">\n            <v-card>\n              <v-card-title class=\"text-h5\"\n                >¿Estás seguro que deseas eliminar permanentemente\n                esto?</v-card-title\n              >\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"yellow darken-3\" dark @click=\"closeDelete\"\n                  >No</v-btn\n                >\n                <v-btn color=\"yellow darken-3\" dark @click=\"deleteItemConfirm\"\n                  >Sí</v-btn\n                >\n                <v-spacer></v-spacer>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n        </v-toolbar>\n      </template>\n      <template v-slot:[`item.actions`]=\"{ item }\">\n        <v-icon small class=\"mr-2\" @click=\"editItem(item)\"> mdi-pencil </v-icon>\n        <v-icon small @click=\"deleteItem(item)\"> mdi-delete </v-icon>\n      </template>\n    </v-data-table>\n  </v-container>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  data: () => ({\n    dialog: false,\n    dialogDelete: false,\n    headers: [\n      {\n        text: \"Nombre\",\n        align: \"start\",\n        value: \"name\",\n      },\n      { text: \"Correo electrónico\", value: \"mail\" },\n      { text: \"Fecha de creación\", value: \"createdDateFormated\" },\n      { text: \"Estado\", value: \"statusName\" },\n      { text: \"Acciones\", value: \"actions\", sortable: false },\n    ],\n    items: [],\n    opciones: [\"Activo\", \"Inactivo\"],\n    editedIndex: -1,\n    editedItem: {\n      name: \"\",\n      mail: \"\",\n      createdDate: \"\",\n      status: 1,\n      statusName: \"Activo\",\n      password: \"123456!\",\n      idOperador: 0,\n      createdDateFormated: \"\",\n    },\n    defaultItem: {\n      name: \"\",\n      mail: \"\",\n      createdDate: \"\",\n      status: 1,\n      statusName: \"Activo\",\n      password: \"123456!\",\n      idOperador: 0,\n      createdDateFormated: \"\",\n    },\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"Nuevo\" : \"Editar\";\n    },\n  },\n\n  watch: {\n    dialog(val) {\n      val || this.close();\n    },\n    dialogDelete(val) {\n      val || this.closeDelete();\n    },\n  },\n\n  async created() {\n    try {\n      let response = await axios.get(\n        this.$store.state.backBaseURL + \"/api/operator\"\n      );\n      response.data.map((item) => {\n        if (item.status == 1) item.statusName = \"Activo\";\n        else item.statusName = \"Inactivo\";\n        const fecha = new Date(item.createdDate);\n        item.createdDateFormated =\n          \"\" + fecha.toLocaleDateString() + \" \" + fecha.toLocaleTimeString();\n        this.items.push(item);\n      });\n    } catch (error) {\n      console.log(error);\n    }\n  },\n\n  methods: {\n    editItem(item) {\n      this.editedIndex = this.items.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n\n    deleteItem(item) {\n      this.editedIndex = this.items.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialogDelete = true;\n    },\n\n    async deleteItemConfirm() {\n      try {\n        await axios.delete(\n          this.$store.state.backBaseURL +\n            \"/api/operator/\" +\n            this.editedItem.idOperator\n        );\n        this.items.splice(this.editedIndex, 1);\n        this.closeDelete();\n      } catch (error) {\n        console.log(error);\n      }\n      this.items.splice(this.editedIndex, 1);\n      this.closeDelete();\n    },\n\n    close() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n\n    closeDelete() {\n      this.dialogDelete = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n      });\n    },\n\n    async save() {\n      if (this.editedItem.statusName == \"Activo\") this.editedItem.status = 1;\n      else this.editedItem.status = 0;\n      if (this.editedIndex > -1) {\n        //update\n        Object.assign(this.items[this.editedIndex], this.editedItem);\n        try {\n          await axios.put(\n            this.$store.state.backBaseURL +\n              \"/api/operator/\" +\n              this.editedItem.idOperator,\n            this.editedItem\n          );\n        } catch (error) {\n          console.log(error);\n        }\n      } else {\n        //create\n\n        const hoy = new Date();\n        this.editedItem.createdDate = hoy.toUTCString();\n        this.editedItem.createdDateFormated =\n          \"\" + hoy.toLocaleDateString() + \" \" + hoy.toLocaleTimeString();\n        this.items.push(this.editedItem);\n        try {\n          await axios.post(\n            this.$store.state.backBaseURL + \"/api/operator\",\n            this.editedItem\n          );\n        } catch (error) {\n          console.log(error);\n        }\n      }\n      this.close();\n    },\n  },\n};\n</script>"]}]}