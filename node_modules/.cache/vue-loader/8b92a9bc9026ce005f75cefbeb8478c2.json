{"remainingRequest":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/ferp93/Otros/GIt/muvilWeb/src/views/LogContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/ferp93/Otros/GIt/muvilWeb/src/views/LogContent.vue","mtime":1634748447299},{"path":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/cache-loader/dist/cjs.js","mtime":1634753517854},{"path":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/babel-loader/lib/index.js","mtime":1634753518287},{"path":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/cache-loader/dist/cjs.js","mtime":1634753517854},{"path":"/Users/ferp93/Otros/GIt/muvilWeb/node_modules/vue-loader/lib/index.js","mtime":1634753512359}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiAoKSA9PiAoewogICAgc25hY2tiYXI6IGZhbHNlLAogICAgZW1haWw6ICIiLAogICAgcGFzc3dvcmQ6ICIiLAogICAgbG9hZGVyOiBudWxsLAogICAgbG9hZGluZzogZmFsc2UsCiAgICBpZFVzdWFyaW86IC0xLAogICAgcGF0ZXJuOgogICAgICAvXigoW148PigpW1xdXFwuLDs6XHNAIl0rKFwuW148PigpW1xdXFwuLDs6XHNAIl0rKSopfCgiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31dKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC8sCiAgICBzaG93UDogZmFsc2UsCiAgICB1c2VyOiB7CiAgICAgIGlkT3BlcmF0b3I6IDAsCiAgICAgIG5hbWU6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIG1haWw6ICIiLAogICAgICBjcmVhdGVkRGF0ZTogIiIsCiAgICAgIHN0YXR1czogMCwKICAgICAgcGhvbmU6ICIiLAogICAgICBkcml2ZXJOYW1lOiAiIiwKICAgICAgZHJpdmVyRE5JOiAxLAogICAgICBkcml2ZXJOdW1iZXI6ICIiLAogICAgICB2ZWhpY3VsZUJyYW5kOiAiIiwKICAgICAgdmVoaWN1bGVDb2xvcjogIiIsCiAgICAgIHZlaGljdWxlTW9kZWw6ICIiLAogICAgICB2ZWhpY3VsZVBsYXRlOiAiIiwKICAgICAgc2VydmljZVN0YXJ0OiAiIiwKICAgICAgc2VydmljZUVuZDogIiIsCiAgICAgIGlvdFVSTDogIiIsCiAgICB9LAogICAgcmVzcG9uc2VKU09OOiBbXSwKICAgIC8vIHJ1bGVzOiB7CiAgICAvLyAgIHJlcXVpcmVkOiAodmFsdWUpID0+ICEhdmFsdWUgfHwgIkNvcnJlbyBlbGVjdHLDs25pY28gb2JsaWdhdG9yaW8iLAogICAgLy8gICAvL2NvdW50ZXI6IHZhbHVlID0+IHZhbHVlLmxlbmd0aCA8PSAyMCB8fCAnTWF4IDIwIGNoYXJhY3RlcnMnLAogICAgLy8gICBlbWFpbDogKHZhbHVlKSA9PiB7CiAgICAvLyAgICAgY29uc3QgcGF0dGVybiA9CiAgICAvLyAgICAgICAvXigoW148PigpW1xdXFwuLDs6XHNAIl0rKFwuW148PigpW1xdXFwuLDs6XHNAIl0rKSopfCgiLisiKSlAKChcW1swLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31cLlswLTldezEsM31dKXwoKFthLXpBLVpcLTAtOV0rXC4pK1thLXpBLVpdezIsfSkpJC87CiAgICAvLyAgICAgcmV0dXJuIHBhdHRlcm4udGVzdCh2YWx1ZSkgfHwgIkNvcnJlbyBlbGVjdHLDs25pY28gaW52w6FsaWRvIjsKICAgIC8vICAgfSwKICAgIC8vIH0sCiAgfSksCiAgY29tcHV0ZWQ6IHsKICAgIGxvZ3Vlb1Bvc2libGUoKSB7CiAgICAgIC8vcmV0dXJuICh0aGlzLnBhdHRlcm4udGVzdCh0aGlzLmVtYWlsKSAmJiB0aGlzLnBhc3N3b3JkLmxlbmd0aCA+IDYpOwogICAgICByZXR1cm4gISgKICAgICAgICB0aGlzLmVtYWlsLm1hdGNoKHRoaXMucGF0ZXJuKSAmJgogICAgICAgIHRoaXMucGFzc3dvcmQubGVuZ3RoID49IDYgJiYKICAgICAgICAhdGhpcy5sb2FkaW5nCiAgICAgICk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgbG9naW4oKSB7CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBhc3luYyBsb2FkZXIoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvYWRlcjsKICAgICAgdGhpc1tsXSA9ICF0aGlzW2xdOwoKICAgICAgbGV0IGJvZHkgPSB7CiAgICAgICAgbWFpbDogdGhpcy5lbWFpbCwKICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZCwKICAgICAgfTsKCiAgICAgIHRyeSB7CiAgICAgICAgdGhpc1tsXSA9IGZhbHNlOwogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoCiAgICAgICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5iYWNrQmFzZVVSTCArICIvYXBpL29wZXJhdG9yL2xvZ2luIiwKICAgICAgICAgIGJvZHkKICAgICAgICApOwogICAgICAgIHRoaXMucmVzcG9uc2VKU09OID0gcmVzcG9uc2U7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlmICh0aGlzLnJlc3BvbnNlSlNPTi5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICB0aGlzLnVzZXIgPSB0aGlzLnJlc3BvbnNlSlNPTi5kYXRhOwogICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnVzZXIpOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzdG9yZUxvZ2dlZEluVXNlciIsIHRoaXMudXNlcik7CiAgICAgICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudXNlci5pZE9wZXJhdG9yID09IC0xKQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSgib3BlcmF0b3IiKTsKICAgICAgICAgIGVsc2UgdGhpcy4kcm91dGVyLnJlcGxhY2UoInNlcnZpY2UiKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVzcG9uc2VKU09OLnN0YXR1cyA9PSAyMDQpIHsKICAgICAgICAgIC8vbm8gZXhpc3RlIGVzZSB1c3VhcmlvCiAgICAgICAgICB0aGlzLnNuYWNrYmFyID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgdGhpcy5sb2FkZXIgPSBudWxsOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["LogContent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LogContent.vue","sourceRoot":"src/views","sourcesContent":["<template >\n  <div class=\"fill-height blue darken-4\" height=\"100%\">\n    <v-container fluid fill-height>\n      <v-layout align-center justify-center>\n        <v-flex>\n          <v-card\n            class=\"d-flex align-center mb-6 mx-auto\"\n            max-width=\"400\"\n            tile\n            flat\n            color=\"transparent\"\n          >\n            <v-container fill-height fluid>\n              <v-container fluid class=\"pa-10\">\n                <v-img\n                  class=\"mx-auto\"\n                  max-width=\"250\"\n                  :src=\"require('../assets/muvil.svg')\"\n                ></v-img>\n              </v-container>\n\n              <v-text-field\n                v-model=\"email\"\n                label=\"Correo electrónico\"\n                solo\n              ></v-text-field>\n              <v-text-field\n                :append-icon=\"showP ? 'mdi-eye' : 'mdi-eye-off'\"\n                :type=\"showP ? 'text' : 'password'\"\n                name=\"input-10-2\"\n                label=\"Contraseña\"\n                value=\"\"\n                class=\"input-group--focused\"\n                v-model=\"password\"\n                solo\n                @click:append=\"showP = !showP\"\n              ></v-text-field>\n              <v-btn\n                block\n                dark\n                color=\"yellow darken-3\"\n                :loading=\"loading\"\n                :disabled=\"logueoPosible\"\n                @click=\"loader = 'loading'\"\n              >\n                Acceder\n              </v-btn>\n              <v-snackbar v-model=\"snackbar\">\n                Correo electrónico o contraseña inválidos\n\n                <template v-slot:action=\"{ attrs }\">\n                  <v-btn\n                    color=\"yellow darken-3\"\n                    text\n                    v-bind=\"attrs\"\n                    @click=\"snackbar = false\"\n                  >\n                    Cerrar\n                  </v-btn>\n                </template>\n              </v-snackbar>\n            </v-container>\n          </v-card>\n        </v-flex>\n      </v-layout>\n    </v-container>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  data: () => ({\n    snackbar: false,\n    email: \"\",\n    password: \"\",\n    loader: null,\n    loading: false,\n    idUsuario: -1,\n    patern:\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n    showP: false,\n    user: {\n      idOperator: 0,\n      name: \"\",\n      password: \"\",\n      mail: \"\",\n      createdDate: \"\",\n      status: 0,\n      phone: \"\",\n      driverName: \"\",\n      driverDNI: 1,\n      driverNumber: \"\",\n      vehiculeBrand: \"\",\n      vehiculeColor: \"\",\n      vehiculeModel: \"\",\n      vehiculePlate: \"\",\n      serviceStart: \"\",\n      serviceEnd: \"\",\n      iotURL: \"\",\n    },\n    responseJSON: [],\n    // rules: {\n    //   required: (value) => !!value || \"Correo electrónico obligatorio\",\n    //   //counter: value => value.length <= 20 || 'Max 20 characters',\n    //   email: (value) => {\n    //     const pattern =\n    //       /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    //     return pattern.test(value) || \"Correo electrónico inválido\";\n    //   },\n    // },\n  }),\n  computed: {\n    logueoPosible() {\n      //return (this.pattern.test(this.email) && this.password.length > 6);\n      return !(\n        this.email.match(this.patern) &&\n        this.password.length >= 6 &&\n        !this.loading\n      );\n    },\n  },\n  methods: {\n    login() {\n      return null;\n    },\n  },\n  watch: {\n    async loader() {\n      const l = this.loader;\n      this[l] = !this[l];\n\n      let body = {\n        mail: this.email,\n        password: this.password,\n      };\n\n      try {\n        this[l] = false;\n        let response = await axios.post(\n          this.$store.state.backBaseURL + \"/api/operator/login\",\n          body\n        );\n        this.responseJSON = response;\n      } catch (error) {\n        console.log(error);\n      } finally {\n        if (this.responseJSON.status == 200) {\n          this.user = this.responseJSON.data;\n          //console.log(this.user);\n          this.$store.commit(\"storeLoggedInUser\", this.user);\n          if (this.$store.state.user.idOperator == -1)\n            this.$router.replace(\"operator\");\n          else this.$router.replace(\"service\");\n        } else if (this.responseJSON.status == 204) {\n          //no existe ese usuario\n          this.snackbar = true;\n        }\n        this.loader = null;\n      }\n    },\n  },\n};\n</script>"]}]}